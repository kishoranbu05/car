<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FiveM Handling.meta Generator (Fixed)</title>

<style>
body {
  background:#0c0f14;
  color:#eaeaea;
  font-family: Arial, Helvetica, sans-serif;
  padding:20px;
}
h1 {
  color:#4caf50;
  text-align:center;
}
.container {
  max-width:1100px;
  margin:auto;
}
label {
  margin-top:15px;
  display:block;
  font-weight:bold;
}
input, select, textarea, button {
  width:100%;
  margin-top:6px;
  padding:10px;
  background:#151a23;
  color:#fff;
  border:1px solid #333;
  border-radius:4px;
}
textarea { resize:vertical; }
button {
  margin-top:20px;
  background:#4caf50;
  font-size:16px;
  cursor:pointer;
  border:none;
}
button:hover { background:#43a047; }
.footer {
  text-align:center;
  margin-top:30px;
  font-size:13px;
  color:#888;
}
</style>
</head>

<body>

<h1>ðŸš— FiveM Handling.meta Generator (Crash-Safe)</h1>

<div class="container">

<label>Vehicle Name (spawn / handlingName)</label>
<input id="carName" placeholder="superb" />

<label>Vehicle Weight (kg)</label>
<input id="weight" type="number" placeholder="1500" />

<label>Handling Style</label>
<select id="style">
  <option value="rp">Realistic RP</option>
  <option value="semi">Semi Drift</option>
  <option value="drift">Full Drift</option>
</select>

<button onclick="generate()">Generate Handling.meta</button>

<label>Generated handling.meta (SAFE)</label>
<textarea id="output" rows="26"></textarea>

</div>

<div class="footer">
  XML-safe â€¢ RP balanced â€¢ Drift supported â€¢ No crash
</div>

<script>
function f(n) {
  return Number(n).toFixed(6);
}

function generate() {

  const name = (document.getElementById("carName").value || "customcar").toUpperCase();
  const weight = Number(document.getElementById("weight").value);
  const style = document.getElementById("style").value;

  if (!weight || weight < 500) {
    alert("Enter valid vehicle weight (kg)");
    return;
  }

  /* =============================
     BASE FORMULAS
  ============================= */

  let mass = weight;
  let drag = weight / 150;
  let topSpeed = 160 - (weight / 25);

  let driveForce = (550 / weight);
  let brakeForce = weight * 0.0025;
  let handBrake = weight * 0.0018;

  let tractionMax = 3.0 - (weight / 3000);
  let tractionMin = tractionMax - 0.5;
  let tractionLat = 22 + (weight / 200);
  let tractionLoss = weight / 2000;

  let steeringLock = 35;
  let brakeBias = 0.63;

  /* =============================
     STYLE MODIFIERS
  ============================= */

  if (style === "semi") {
    driveForce *= 1.10;
    tractionLoss *= 1.3;
    steeringLock = 38;
    brakeBias = 0.60;
  }

  if (style === "drift") {
    driveForce *= 1.25;
    tractionLoss *= 1.6;
    tractionMax -= 0.4;
    tractionMin -= 0.4;
    steeringLock = 42;
    brakeBias = 0.58;
  }

  let antiRoll = weight * 0.05;

  /* =============================
     FINAL XML (CRASH-SAFE)
  ============================= */

  const xml = `<?xml version="1.0" encoding="UTF-8"?>
<CHandlingDataMgr>
  <HandlingData>
    <Item type="CHandlingData">
      <handlingName>${name}</handlingName>

      <fMass value="${f(mass)}" />
      <fInitialDragCoeff value="${f(drag)}" />
      <fPercentSubmerged value="85.000000" />

      <vecCentreOfMassOffset x="0.000000" y="0.050000" z="-0.020000" />
      <vecInertiaMultiplier x="1.000000" y="1.300000" z="1.500000" />

      <fDriveBiasFront value="0.450000" />
      <nInitialDriveGears value="6" />

      <fInitialDriveForce value="${f(driveForce)}" />
      <fDriveInertia value="1.050000" />
      <fClutchChangeRateScaleUpShift value="2.000000" />
      <fClutchChangeRateScaleDownShift value="2.000000" />
      <fInitialDriveMaxFlatVel value="${f(topSpeed)}" />

      <fBrakeForce value="${f(brakeForce)}" />
      <fBrakeBiasFront value="${f(brakeBias)}" />
      <fHandBrakeForce value="${f(handBrake)}" />

      <fSteeringLock value="${f(steeringLock)}" />

      <fTractionCurveMax value="${f(tractionMax)}" />
      <fTractionCurveMin value="${f(tractionMin)}" />
      <fTractionCurveLateral value="${f(tractionLat)}" />
      <fTractionSpringDeltaMax value="0.150000" />
      <fLowSpeedTractionLossMult value="${f(tractionLoss)}" />
      <fCamberStiffnesss value="0.000000" />
      <fTractionBiasFront value="0.500000" />
      <fTractionLossMult value="1.000000" />

      <fSuspensionForce value="1.600000" />
      <fSuspensionCompDamp value="0.700000" />
      <fSuspensionReboundDamp value="0.700000" />
      <fSuspensionUpperLimit value="0.175000" />
      <fSuspensionLowerLimit value="-0.200000" />
      <fSuspensionRaise value="0.015000" />
      <fSuspensionBiasFront value="0.520000" />

      <fAntiRollBarForce value="${f(antiRoll)}" />
      <fAntiRollBarBiasFront value="0.600000" />
      <fRollCentreHeightFront value="0.670000" />
      <fRollCentreHeightRear value="0.600000" />

      <fCollisionDamageMult value="1.000000" />
      <fWeaponDamageMult value="1.000000" />
      <fDeformationDamageMult value="2.000000" />
      <fEngineDamageMult value="1.000000" />

      <fPetrolTankVolume value="80.000000" />
      <fOilVolume value="8.000000" />

      <fSeatOffsetDistX value="0.000000" />
      <fSeatOffsetDistY value="0.000000" />
      <fSeatOffsetDistZ value="0.000000" />

      <nMonetaryValue value="50000" />
      <strModelFlags>000010</strModelFlags>
      <strHandlingFlags>20000</strHandlingFlags>
      <strDamageFlags>0</strDamageFlags>
      <AIHandling>AVERAGE</AIHandling>

      <SubHandlingData>
        <Item type="CCarHandlingData">
          <fBackEndPopUpCarImpulseMult value="0.100000" />
          <fBackEndPopUpBuildingImpulseMult value="0.030000" />
          <fBackEndPopUpMaxDeltaSpeed value="0.600000" />
        </Item>
        <Item type="NULL" />
        <Item type="NULL" />
      </SubHandlingData>

    </Item>
  </HandlingData>
</CHandlingDataMgr>`;

  document.getElementById("output").value = xml;
}
</script>

</body>
</html>
