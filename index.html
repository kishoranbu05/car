<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FiveM Handling Generator</title>
  <style>
    body {
      background:#0f1115;
      color:#fff;
      font-family: Arial, sans-serif;
      padding:20px;
    }
    textarea, input, select, button {
      width:100%;
      margin-top:10px;
      padding:10px;
      background:#1c1f26;
      color:#fff;
      border:1px solid #333;
    }
    button {
      background:#4caf50;
      font-size:16px;
      cursor:pointer;
    }
    h2 { color:#4caf50; }
  </style>
</head>
<body>

<h2>ðŸš— FiveM Handling.meta Generator</h2>

<label>Vehicle Name</label>
<input id="carName" placeholder="e.g. sultanrs" />

<label>Vehicle Weight (kg)</label>
<input id="weight" type="number" placeholder="e.g. 1500" />

<label>Handling Style</label>
<select id="style">
  <option value="rp">Realistic RP</option>
  <option value="semi">Semi Drift</option>
  <option value="drift">Full Drift</option>
</select>

<label>Paste FULL original handling.meta</label>
<textarea id="input" rows="12"></textarea>

<button onclick="generate()">Generate New Handling</button>

<label>Final handling.meta (copy & paste)</label>
<textarea id="output" rows="18"></textarea>

<script>
function generate() {
  const name = document.getElementById("carName").value || "customcar";
  const weight = parseFloat(document.getElementById("weight").value);
  const style = document.getElementById("style").value;

  if (!weight) {
    alert("Enter vehicle weight");
    return;
  }

  // ---------- CORE FORMULAS ----------
  const mass = weight;
  const topSpeed = (160 - (weight / 25)).toFixed(1);
  let driveForce = (550 / weight) * 1.2;
  let drag = (weight / 150).toFixed(2);
  let brakeForce = (weight * 0.0025).toFixed(2);
  let handBrake = (weight * 0.0018).toFixed(2);

  let tractionMax = (3.0 - (weight / 3000)).toFixed(2);
  let tractionMin = (tractionMax - 0.5).toFixed(2);
  let tractionLat = (22 + (weight / 200)).toFixed(2);
  let tractionLoss = (weight / 2000).toFixed(2);

  let steerLock = 35;
  let brakeBias = 0.63;

  // ---------- DRIFT MODIFIERS ----------
  if (style === "semi") {
    driveForce *= 1.1;
    tractionLoss *= 1.3;
    steerLock = 38;
    brakeBias = 0.60;
  }

  if (style === "drift") {
    driveForce *= 1.25;
    tractionLoss *= 1.6;
    tractionMax -= 0.4;
    tractionMin -= 0.4;
    steerLock = 42;
    brakeBias = 0.58;
  }

  driveForce = driveForce.toFixed(3);

  // ---------- FINAL HANDLING FILE ----------
  const output = `
<handling>
  <Item type="CHandlingData">
    <handlingName>${name.toUpperCase()}</handlingName>

    <fMass>${mass}</fMass>
    <fInitialDragCoeff>${drag}</fInitialDragCoeff>

    <fInitialDriveForce>${driveForce}</fInitialDriveForce>
    <fInitialDriveMaxFlatVel>${topSpeed}</fInitialDriveMaxFlatVel>
    <fDriveInertia>1.0</fDriveInertia>

    <fBrakeForce>${brakeForce}</fBrakeForce>
    <fBrakeBiasFront>${brakeBias}</fBrakeBiasFront>
    <fHandBrakeForce>${handBrake}</fHandBrakeForce>

    <fSteeringLock>${steerLock}</fSteeringLock>

    <fTractionCurveMax>${tractionMax}</fTractionCurveMax>
    <fTractionCurveMin>${tractionMin}</fTractionCurveMin>
    <fTractionCurveLateral>${tractionLat}</fTractionCurveLateral>
    <fTractionBiasFront>0.50</fTractionBiasFront>
    <fLowSpeedTractionLossMult>${tractionLoss}</fLowSpeedTractionLossMult>

    <fAntiRollBarForce>${(weight * 0.05).toFixed(2)}</fAntiRollBarForce>
    <fAntiRollBarBiasFront>0.60</fAntiRollBarBiasFront>

  </Item>
</handling>
`;

  document.getElementById("output").value = output.trim();
}
</script>

</body>
</html>
